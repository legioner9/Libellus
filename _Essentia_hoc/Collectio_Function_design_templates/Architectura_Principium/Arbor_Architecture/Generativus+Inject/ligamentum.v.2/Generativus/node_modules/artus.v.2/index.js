'use strict';

const artus = (propObj, fn) => {

  propObj.closureForFn = propObj.preComutClosure(propObj.closureForFn);

  const exitus = function(...args) {

    const bfn = fn.bind(propObj.thisForFn);
    const ostium = {
      bfn: bfn,
      args: args,
      closureForFn: propObj.closureForFn,
      thisForFn: propObj.thisForFn,
    };

    exitus.getOstium = () => ostium;
    // comutatus fn
    const moresFn = propObj.closureToMoresFn(bfn, propObj.closureForFn);
    // comutatus closure
    propObj.closureForFn = propObj.comutClosure(propObj.closureForFn);
    // reditum moresFn
    propObj.returnBfn(moresFn, propObj.closureForFn)(...args);
    Object.assign(exitus, ostium);
  };
  return Object.assign(exitus, propObj.methods);
};


module.exports = {
  artus,
};
